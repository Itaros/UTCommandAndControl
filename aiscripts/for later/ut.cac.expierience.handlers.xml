<?xml version="1.0" encoding="UTF-8"?>
<aiscript xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" name="ut.cac.expierience.handlers" xsi:noNamespaceSchemaLocation="http://utnas/~unitrader/XRebirthxsds/aiscripts.xsd" version="1">
  <!-- This Library Script contains all Signal Handlers related to Expierience Progress -->
  <!-- Currently implemented are:
  -> X boarding (Already in Vanilla, so unimportant for now)
  -> X combat
  -> X engineering
  -> X leadership
  -> X management
  -> X morale
  -> X navigation
  -> X science
  -->
  <interrupts>
    <library>
      <!-- Combat Expierience increases with shot Targets, depending on entitytype: full exp for DOs and Pilots in small craft; half exp for captains in big ships, 0 for other -->
      <handler name="ut_cac_expierience_combat">
        <conditions>
          <event_object_killed_object object="this.container"/>
        </conditions>
        <actions>
          <set_value name="$killer" exact="event.object"/>
          <set_value name="$target" exact="event.param"/>
          <set_value name="$method" exact="event.param2"/>
        </actions>
      </handler>
      <!-- Engineering Expierience increases with repaired Objects/Hull points, depending on entitytype: full exp for Engineers, 0 for other -->
      <handler name="ut_cac_expierience_engineering">
        <conditions>
          <event_object_hull_repaired object="this.container"/>
        </conditions>
        <actions>
          <set_value name="$repaired_object" exact="event.object"/>
          <set_value name="$repaired_component" exact="event.param"/>
          <set_value name="$hull_value_new" exact="event.param2"/>
          <set_value name="$hull_value_repaired" exact="event.param2"/>
        </actions>
      </handler>
      <!-- Leadership Expierience increases with ***no idea*** -->
      <handler name="ut_cac_expierience_leadership">
        <conditions>
        </conditions>
        <actions>
          <set_value name="" exact="event.object"/>
          <set_value name="" exact="event.param"/>
          <set_value name="" exact="event.param2"/>
          <set_value name="" exact="event.param2"/>
        </actions>
      </handler>
      <!-- Managment Expierience increases with Amount of Money traded, full exp for managers; half  exp for Pilots/captains, 0 for others -->
      <handler name="ut_cac_expierience_managment">
        <conditions>
          <event_object_money_updated object="this"/>
        </conditions>
        <actions>
          <set_value name="$account_owner" exact="event.object"/>
          <set_value name="$oldamount" exact="event.param"/>
          <set_value name="$newamount" exact="event.param2"/>
          <set_value name="" exact="event.param2"/>
        </actions>
      </handler>
      <!-- Diffrent Approach: Managment Expierience increases with Value of Wares traded with, full exp for managers; half (quarter) exp for Pilots/captains (they usually trade them twise, so quarter is the same as half), 0 for others -->
      <handler name="ut_cac_expierience_managment_alt">
        <conditions>
          <!-- manual signalling by the Scripts necesary -->
        </conditions>
        <actions>
          <set_value name="$account_owner" exact="event.object"/>
          <set_value name="$oldamount" exact="event.param"/>
          <set_value name="$newamount" exact="event.param2"/>
          <set_value name="" exact="event.param2"/>
        </actions>
      </handler>
      <!-- Morale  increases with ***no idea*** -->
      <handler name="ut_cac_expierience_morale">
        <conditions>
        </conditions>
        <actions>
          <set_value name="" exact="event.object"/>
          <set_value name="" exact="event.param"/>
          <set_value name="" exact="event.param2"/>
          <set_value name="" exact="event.param2"/>
        </actions>
      </handler>
      <!-- Navigation Expierience increases with Distance travelled, full exp for captains/pilots, none for others-->
      <!-- may be modified by travel method: full amount for regular travel, 1/10 for boost (25x speed), 1/100 for jumpdrive and 1/1000 for gate passage (longer distances are still more effective, but should not be overpowered) -->
      <handler name="ut_cac_expierience_navigation">
        <conditions>
          <!-- main criteria for exp progress - the others are just/also for applying modifiers-->
          <event_object_changed_zone object="this.ship"/>
          <event_object_docked object="this.ship"/>
          <!-- main criteria end -->
          <event_boost_started object="this.ship"/>
          <event_boost_stopped object="this.ship"/>
          <event_object_jump_completed object="this.ship"/>
        </conditions>
        <actions>
          <set_value name="$ship" exact="event.object"/>
          <!-- changed Zone -->
          <set_value name="$oldzone" exact="event.param"/>
          <set_value name="$newzone" exact="event.param2"/>
          <!-- docked -->
          <set_value name="$dock" exact="event.param"/>
          <set_value name="$zone" exact="event.param2"/>
          <!-- boost and jump dont have params -->
        </actions>
      </handler>
      <!-- Science  increases with ***no idea*** - maybe time active on a station? -->
      <handler name="ut_cac_expierience_science">
        <conditions>
        </conditions>
        <actions>
          <set_value name="" exact="event.object"/>
          <set_value name="" exact="event.param"/>
          <set_value name="" exact="event.param2"/>
          <set_value name="" exact="event.param2"/>
        </actions>
      </handler>
    
    </library>
  </interrupts>
</aiscript>
