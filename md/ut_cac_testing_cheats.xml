<?xml version="1.0" encoding="UTF-8"?>
<mdscript xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" name="UT_CAC_Testing_Cheats" xsi:noNamespaceSchemaLocation="http://utnas/~unitrader/XRebirthxsds/md.xsd">
  <cues>
    <cue name="Cheat_Ship_with_surplus_crew">
      <actions>
        <create_ship name="$ship" macro="macro.units_size_xl_builder_ship_macro" zone="player.zone">
          <owner exact="faction.player"/>
          <units>
            <unit category="unitcategory.welder" mk="1" exact="100"/>
          </units>
          <safepos x="0m" y="0m" z="-10km" radius="2km"/>
        </create_ship>
        <!-- Create UT CAC NPCs --> 
        <find_dock_location name="$dock" container="$ship" multiple="false" />
        <create_cue_actor name="$pilot" cue="this"><owner exact="faction.player"/></create_cue_actor>
        <add_actor_to_platform actor="$pilot" dockingbay="$dock.component"/>
        <remove_cue_actor actor="$pilot" cue="this"/>
        <assign_pilot actor="$pilot" object="$ship"/>
        <add_to_player_squad object="$ship"/>
        <signal_cue_instantly cue="md.UT_CAC_Captain.Main" param="$pilot"/>
        
        <create_cue_actor name="$architect" cue="this"><owner exact="faction.player"/></create_cue_actor>
        <add_actor_to_platform actor="$architect" dockingbay="$dock.component"/>
        <remove_cue_actor actor="$architect" cue="this"/>
        <signal_cue_instantly cue="md.UT_CAC_Architect.Main" param="$architect"/>
        <assign_architect actor="$architect" object="$ship"/>
        
        <!-- create NPCs using Vanilla Dialogue -->
        <create_platform_actor name="$defencemanager" dockingbay="$dock.component" type="entitytype.defencecontrol"><owner exact="faction.player"/></create_platform_actor>
        <assign_defence_manager actor="$defencemanager" object="$ship" />
        <create_platform_actor name="$defencemanager" dockingbay="$dock.component" type="entitytype.defencecontrol"><owner exact="faction.player"/></create_platform_actor>
        <create_platform_actor name="$engineer" dockingbay="$dock.component" type="entitytype.engineer"><owner exact="faction.player"/></create_platform_actor>
        <assign_engineer actor="$engineer" object="$ship"/>
        <create_platform_actor name="$manager" dockingbay="$dock.component" type="entitytype.manager"><owner exact="faction.player"/></create_platform_actor>
        <create_platform_actor name="$manager" dockingbay="$dock.component" type="entitytype.specialistagriculture"><owner exact="faction.player"/></create_platform_actor>
        <create_platform_actor name="$manager" dockingbay="$dock.component" type="entitytype.specialistpowerstorage"><owner exact="faction.player"/></create_platform_actor>
        <create_platform_actor name="$manager" dockingbay="$dock.component" type="entitytype.specialistfood"><owner exact="faction.player"/></create_platform_actor>
        <create_platform_actor name="$manager" dockingbay="$dock.component" type="entitytype.specialistchemical"><owner exact="faction.player"/></create_platform_actor>
        <create_platform_actor name="$manager" dockingbay="$dock.component" type="entitytype.specialistprecision"><owner exact="faction.player"/></create_platform_actor>
        <create_platform_actor name="$manager" dockingbay="$dock.component" type="entitytype.specialistweapons"><owner exact="faction.player"/></create_platform_actor>
        <create_platform_actor name="$manager" dockingbay="$dock.component" type="entitytype.specialistpharmaceuticals"><owner exact="faction.player"/></create_platform_actor>
        <create_platform_actor name="$manager" dockingbay="$dock.component" type="entitytype.specialistmetals"><owner exact="faction.player"/></create_platform_actor>
        <create_platform_actor name="$manager" dockingbay="$dock.component" type="entitytype.specialistgeophysics"><owner exact="faction.player"/></create_platform_actor>
        <create_platform_actor name="$manager" dockingbay="$dock.component" type="entitytype.specialistsurfacesystems"><owner exact="faction.player"/></create_platform_actor>
        <create_platform_actor name="$manager" dockingbay="$dock.component" type="entitytype.specialistpowersupply"><owner exact="faction.player"/></create_platform_actor>
        <create_platform_actor name="$manager" dockingbay="$dock.component" type="entitytype.specialistaquatics"><owner exact="faction.player"/></create_platform_actor>
      </actions>
      <cues>
        <cue name="Cheat_Build_mats" instantiate="true">
          <conditions>
            <event_build_started object="$ship"/>
          </conditions>
          <actions>
            <set_value name="$buildmaterials" exact="$ship.buildmodule.neededslotresources.list.clone"/>
            <do_all exact="$buildmaterials.count" counter="$i">
              <add_cargo object="$ship" ware="$buildmaterials.{$i}" exact="$ship.buildmodule.neededslotresources.{$buildmaterials.{$i}}.count"/>
            </do_all>
          </actions>
        </cue>
      </cues>
    </cue>
    <cue name="Cheat_money">
      <actions>
        <reward_player money="1000000000Cr"/>
      </actions>
    </cue>
    <cue name="Destroy_Attackers" instantiate="true">
      <conditions>
        <event_player_owned_attacked/>
      </conditions>
      <actions> 
        <do_if value="event.param.exists and not event.param.isplayerowned">
          <destroy_object object="event.param"/>
        </do_if>
      </actions>
    </cue>
    <cue name="Cheat_Start_equipment">
      <actions>
        <do_if value="not player.entity.inventory.{ware.inv_timewarp}.count">
          <add_inventory entity="player.entity" ware="ware.inv_timewarp" exact="1"/>
        </do_if>
        <upgrade_object_by_macro object="player.primaryship" macro="macro.unit_player_ship_jumpdrive_macro" exact="100" comment="exact in % of available slots!" />
        <add_inventory entity="player.entity" ware="ware.inv_kickstarter" exact="1000"/>
      </actions>
    </cue>
    <cue name="TestHotkey" instantiate="true">
      <conditions>
        <check_any>
          <event_object_signalled object="player.primaryship" param="KeyDown"/>
          <event_object_signalled object="player.primaryship" param="KeyUp"/>
        </check_any>
      </conditions>
      <actions>
        <debug_text filter="general" text="'%1 %2 %3'.[player.age,event.param,event.param2]"/>
      </actions>
    </cue>
  </cues>
</mdscript>
